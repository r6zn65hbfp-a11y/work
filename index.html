<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>æ‰¾ä¸€æ‰¾å°æ¸¸æˆ | Find the Spot</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      background: #f5f5f5;
    }

    header {
      margin-top: 24px;
      text-align: center;
    }

    h1 {
      margin: 0 0 8px;
      font-size: 24px;
    }

    p.subtitle {
      margin: 0 0 16px;
      color: #555;
      font-size: 14px;
    }

    #game-container {
      margin-top: 12px;
      margin-bottom: 16px;
      position: relative;
      display: inline-block;
      background: #fff;
      padding: 8px;
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.08);
    }

    #game-image {
      display: block;
      max-width: 90vw;   /* é€‚é…æ‰‹æœºå±å¹• */
      width: 800px;      /* ä½ å¯ä»¥æ”¹æˆä½ çš„å›¾ç‰‡è®¾è®¡å®½åº¦ */
      height: auto;
      cursor: pointer;
      border-radius: 4px;
    }

    #message {
      min-height: 24px;
      font-size: 16px;
      margin-bottom: 12px;
    }

    #hint {
      font-size: 12px;
      color: #888;
      margin-bottom: 24px;
      text-align: center;
      max-width: 90vw;
    }

    /* å°å°çš„ç‚¹å‡»åé¦ˆåœ†ç‚¹ï¼ˆåªåœ¨ä½ è¿™è¾¹æµ‹è¯•æ—¶æ–¹ä¾¿ï¼‰ */
    .click-marker {
      position: absolute;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      border: 2px solid rgba(0,0,0,0.4);
      pointer-events: none;
      transform: translate(-50%, -50%);
    }
  </style>
</head>
<body>
  <header>
    <h1>GAME FIND ME</h1>
    <p class="subtitle">åœ¨å›¾ç‰‡é‡Œç‚¹å¯¹ä½ç½®ï¼Œå°±ä¼š Bingoï¼</p>
  </header>

  <div id="game-container">
    <!-- â‘  è¿™é‡Œçš„ src è¦æ¢æˆä½ ä»“åº“é‡Œçš„å›¾ç‰‡è·¯å¾„ -->
    <!-- æ¯”å¦‚ä½ åœ¨ä»“åº“é‡Œå»ºäº† img æ–‡ä»¶å¤¹ï¼Œå›¾ç‰‡å« scene.jpg -->
  <img id="game-image" src="IMG_4835.JPG">
  </div>

  <p id="message"></p>
  <p id="hint">æç¤ºï¼šä½ å¯ä»¥åœ¨æµè§ˆå™¨æŒ‰ F12 çœ‹ Console è¾“å‡ºï¼Œæ–¹ä¾¿ä½ è‡ªå·±è°ƒè¯•åæ ‡ã€‚ç©å®¶æ˜¯çœ‹ä¸åˆ°è¿™äº›è®¾å®šçš„ã€‚</p>

<script>
  // åŸå›¾å°ºå¯¸ï¼ˆä½ ç¡®è®¤è¿‡æ˜¯ 3000 Ã— 2560ï¼‰
  const baseWidth = 3000;
  const baseHeight = 2560;

  // ä¸¤ä¸ªç›®æ ‡ç‚¹ + å„è‡ªçš„å®¹é”™èŒƒå›´
  // tolX = æ¨ªå‘å®¹é”™; tolY = çºµå‘å®¹é”™
  const targets = [
    {
      name: 'ç¬¬ä¸€ä¸ªç›®æ ‡',
      x: 1737,
      y: 1345,
      tolX: 40,  // æ¨ªå‘ Â±40
      tolY: 60   // çºµå‘ Â±60
    },
    {
      name: 'ç¬¬äºŒä¸ªç›®æ ‡',
      x: 2546,
      y: 2062,
      tolX: 40,  // æ¨ªå‘ Â±40
      tolY: 40   // çºµå‘ Â±40
    }
  ];

  const img = document.getElementById('game-image');
  const msg = document.getElementById('message');
  const container = document.getElementById('game-container');

  let markerEl = null; // ç”¨æ¥æ˜¾ç¤ºä½ åˆšåˆšç‚¹çš„ä½ç½®çš„å°åœ†ç‚¹

  img.addEventListener('click', function (event) {
    const rect = img.getBoundingClientRect();

    // ç‚¹å‡»ç‚¹ç›¸å¯¹äºå›¾ç‰‡å·¦ä¸Šè§’ï¼ˆä»¥å½“å‰æ˜¾ç¤ºå°ºå¯¸ï¼‰çš„åæ ‡
    const clickX = event.clientX - rect.left;
    const clickY = event.clientY - rect.top;

    const displayWidth = img.clientWidth;
    const displayHeight = img.clientHeight;

    // æŠŠâ€œæ˜¾ç¤ºå°ºå¯¸â€ä¸Šçš„åæ ‡æ¢ç®—æˆâ€œåŸå›¾ 3000Ã—2560â€åæ ‡
    const scaledX = clickX * baseWidth / displayWidth;
    const scaledY = clickY * baseHeight / displayHeight;

    // åœ¨å›¾ç‰‡ä¸Šç”»ä¸€ä¸ªå°åœ†ç‚¹ï¼Œæ–¹ä¾¿ä½ è‡ªå·±çœ‹ç‚¹åˆ°å“ª
    showClickMarker(clickX, clickY);

    // æ£€æŸ¥æœ‰æ²¡æœ‰å‘½ä¸­æŸä¸ªç›®æ ‡åŒºåŸŸ
    let hitTarget = null;

    for (const t of targets) {
      const dx = Math.abs(scaledX - t.x);
      const dy = Math.abs(scaledY - t.y);

      // è¿™é‡Œç”¨â€œçŸ©å½¢åŒºåŸŸâ€åˆ¤å®šï¼šæ¨ªå‘åœ¨ Â±tolX å†…ï¼Œçºµå‘åœ¨ Â±tolY å†…
      if (dx <= t.tolX && dy <= t.tolY) {
        hitTarget = t;
        break;
      }
    }

    if (hitTarget) {
      if (hitTarget === targets[0]) {
        msg.textContent = 'Bingoï¼ä½ æ‰¾åˆ°äº†ç¬¬ä¸€ä¸ªç›®æ ‡ï¼ğŸ‰';
      } else if (hitTarget === targets[1]) {
        msg.textContent = 'å¤ªå‰å®³äº†ï¼Œç¬¬äºŒä¸ªç›®æ ‡ä¹Ÿè¢«ä½ æ‰¾åˆ°äº†ï¼âœ¨';
      }
    } else {
      msg.textContent = 'æ²¡ç‚¹ä¸­ä¸¤ä¸ªç›®æ ‡ï¼Œå†è¯•ä¸€æ¬¡ï½';
    }

    // ç»™ä½ è°ƒè¯•ç”¨ï¼šåœ¨æµè§ˆå™¨ Console çœ‹ä½ åˆšæ‰ç‚¹å‡»çš„â€œåŸå›¾åæ ‡â€
    console.log(`ç‚¹å‡»ï¼ˆåŸå›¾åæ ‡ï¼‰ï¼šx=${scaledX.toFixed(0)}, y=${scaledY.toFixed(0)}`);
  });

  // æ˜¾ç¤ºç‚¹å‡»ä½ç½®çš„å°åœ†ç‚¹
  function showClickMarker(x, y) {
    if (!markerEl) {
      markerEl = document.createElement('div');
      markerEl.className = 'click-marker';
      container.appendChild(markerEl);
    }
    markerEl.style.left = x + 'px';
    markerEl.style.top = y + 'px';
  }
</script>
</body>
</html>
